{{- $not_desktop := ne .chezmoi.hostname "desktop" -}}
{{- $not_laptop := ne .chezmoi.hostname "laptop" -}}
{{- $is_root := eq .chezmoi.username "root" -}}
{{- $is_windows := eq .chezmoi.os "windows" -}}
{{- $is_mac := eq .chezmoi.os "darwin" -}}
symlinks
README.md
update_secrets*
update_config*
install-caddy.sh
{{- if $is_windows }}
*
!.gitconfig
!.ssh
!.ssh/config
!.vimrc
!AppData
!Documents
.ssh/*.pub
{{- else }}
{{- $is_wsl := false }}
{{- if not $is_mac }}
Library/
{{- $is_wsl := hasSuffix "Microsoft" .chezmoi.kernel.osrelease }}
{{- else }}
.config/chrome-flags.conf
Library/Preferences/com.googlecode.iterm2.plist
{{- end }} {{/* if not $is_mac */}}
AppData/
Documents/
{{- if or $is_mac $is_wsl $is_root (and $not_desktop $not_laptop) }}
# Ignore GUI app config files when not desktop or laptop
.config/autostart
.config/mimeapps.list
.config/systemd
.config/tmuxinator/htop-journal.yml
.fonts
.local/bin/*mount-c
.local/bin/mount-sshfs
.local/bin/my-screenlock
.local/bin/pavolume
.xinitrc
.xprofile
.Xresources
{{- end }} {{/* if or $is_mac $is_wsl $is_root (and $not_desktop $not_laptop) */}}
{{- if or (not (lookPath "caddy")) (.no_tunnel) }}
.config/caddy
.config/systemd/user/caddy.service
.config/systemd/user/tunnel-dresrv.service
{{- end }}
{{- range $v := .ignore_config }}
{{- if not (lookPath $v.exec) }}
{{ $v.path }}
{{- else if and $is_root $v.skip_root }}
{{ $v.path }}
{{- end }} {{/* if not (lookPath $v.exec) */}}
{{- end }} {{/* range $v */}}
{{- if or $not_desktop $is_wsl $is_mac }}
# Ignore desktop config on laptop and server
.local/bin/*mount-c
.config/i3/workspace
.config/polybar/scripts/aquaero*
{{- end }} {{/* if or $not_desktop $is_wsl $is_mac */}}
{{- if or $is_root (not $not_desktop) (not $not_laptop) $is_mac $is_wsl }}
.ssh/*.pub
{{- end }} {{/* if or $is_root (not $not_desktop) (not $not_laptop) $is_mac $is_wsl */}}
{{- if $is_root }}
.gnupg
{{- end }} {{/* if $is_root */}}
{{- if or ($is_root) (not (lookPath "nvtop")) }}
.config/polybar/scripts/nvidia*
# No Nvidia GPUs
.config/tmuxinator/hnvtop.yml
.config/tmuxinator/hjn.yml
{{- end }}
{{- if or ($is_root) (not (lookPath "radeontop")) }}
.config/tmuxinator/hjr.yml
{{- end }}
{{- if eq (get .files "mrbot") "" }}
.config/tmuxinator/hjd.yml
{{- end }} {{/* if eq (get .files "mrbot") "" */}}
{{- end }} {{/* if $is_windows */}}
