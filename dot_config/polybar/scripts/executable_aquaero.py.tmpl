{{- $font := "icomoon-feather" -}}
#!/usr/bin/env python3

import re

{{- if eq $font "icomoon-feather" }}
SHOW_DICT = {
    "sensor2": " ",   # feather house
    "sensor1": " ",   # feather droplet
}
{{- else if eq $font "nerd-font" }}
SHOW_DICT = {
    "sensor2": "ﮟ ",    # nerd home outline
    "sensor1": " ",    # nerd drop
}
{{- else if eq $font "siji" }}
SHOW_DICT = {
    "sensor2": " ",
    "sensor1": " ",
}
{{- end }}

DEGREES_SYM = "°C"
SEP = " "


try:
    print_entries = []
    re_fans = re.compile(r'\|?(?P<name>sensor\d+)\t(?P<val>\d+(\.\d+)?)\|?')
    with open(f'/tmp/aquaero.txt', 'r') as f:
        content = f.read()
    avail_dict = {m.group('name'): float(m.group('val')) for m in re_fans.finditer(content)}
    for key, name in SHOW_DICT.items():
        val = avail_dict.get(key)
        if val:
            print_entries.append(f'{name}{val:.1f}{DEGREES_SYM}')
    if print_entries:
        print(SEP.join(print_entries))
except:
    pass